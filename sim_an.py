#!/usr/bin/env python__author__ = 'gallegos'from tools_sofi import rdarg, astroim  # , hubblefrom tools_sofi import cic, cubex, makejpeg, astroim,from pyfits import getdata, PrimaryHDUimport h5pyimport numpy as npimport os, sysfrom math import sqrt# import eagleSqlToolsimport matplotlib.pyplot as pltfrom matplotlib.colors import LinearSegmentedColormapfrom sys import argvimport globfrom copy import copycoordnames = rdarg(argv, 'coord', list, ['x', 'y', 'z'], str)snaps = rdarg(argv, 'snap', list, [10, 11, 12], int)overwrite = rdarg(argv, 'overwrite', bool, False)halfplot = rdarg(argv, 'halfplot', bool, False)histover = rdarg(argv, 'histover', bool, False)LLScubes = rdarg(argv, 'LLScubes', bool, False)sql = rdarg(argv, 'sql', bool, False)sphericalLLS = rdarg(argv, 'sphericalLLS', bool, False)pairLLS = rdarg(argv, 'pairLLS', bool, False)circlehist = rdarg(argv, 'circlehist', bool, False)h2d = rdarg(argv, 'h2d', bool, False)kde = rdarg(argv, 'kde', bool, False)sbhist = rdarg(argv, 'sbhist', bool, False)sbprof = rdarg(argv, 'sbprof', bool, False)superstack = rdarg(argv, 'superstack', bool, False)radprof = rdarg(argv, 'radprof', bool, False)lutzmodel = rdarg(argv, 'lutzmodel', bool, False)mask = rdarg(argv, 'mask', bool, False)do_delaunay = rdarg(argv, 'delaunay', bool, False)temperature = rdarg(argv, 'temperature', bool, False)cdict1 = {'red': ((0.0, 0.0, 0.0),				  (0.5, 0.0, 0.1),				  (1.0, 1.0, 1.0)),		  'green': ((0.0, 0.0, 0.0),					(1.0, 0.0, 0.0)),		  'blue': ((0.0, 0.0, 1.0),				   (0.5, 0.1, 0.0),				   (1.0, 0.0, 0.0))		  }colors = [(0, 0, 1), (1, 1, 0), (1, 0, 0)]cm = LinearSegmentedColormap.from_list('sofi', colors, N=50)snames = {'10': '010_z003p984', '11': '011_z003p528', '12': '012_z003p017', '13': '013_z002p478', '14': '014_z002p237',		  '15': '015_z002p012'}reds = {'10': 984, '11': 528, '12': 17}redshifts = {'10': 3.984, '11': 3.528, '12': 3.017, '13': 2.478, '14': 2.237, '15': 2.012}asec2kpcs = {'10': 7.842, '11': 7.449, '12': 7.108, '13': 8.241, '14': 8.396, '15': 8.516}dz = {'10': 0.0255, '11': .035, '12': .03}types = ['NHI', 'NHII']# sbpeaks = [2.396]# sbpeaks = {'10': 1.011, '11': 1.484, '12':2.396} # for an aperture of 1 asec^2!!! I am converting to flux later onsbpeaks = {'10': .739, '11': 1.293, '12': 2.579}  # for an aperture of 1 asec^2!!! I am converting to flux later onzlens = {'10': 34, '11': 29, '12': 25, '13': 20, '14': 18, '15': 16}lcube = 4096coml = 25  # cMpccom2pix = 163.84  # lcube/comlkpc2pix = lcube / float(coml * 1e3)rads = np.array([0, 2, 4, 8, 12, 20, 30, 50, 100, 200])urange = [-21.405001, -19.551001, -19.080999, -18.549, -18.066, -17.507999]drange = np.arange(0, 21, 2)folder = '/net/astrogate/export/astrodata/gallegos/EAGLE/'for snap in snaps:	for coord in coordnames:		cat = getdata('../../EAGLE/cats/lae_pairs_snap%d' % snap, 1)				ds = [0, 2, 4, 6, 8, 10]		dist = cat['com_dist']		u1 = cat['U1']		for i in range(len(ds) - 1):						cool = (dist > dmin) & (dist < dmax)			umedian = abs(np.median(u1[cool]))			dmin = ds[i]			dmax = ds[i + 1]			all = []			ncores = dmin + 1